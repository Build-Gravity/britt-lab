<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 7: Analysis & Visualization - Psychology Experiment</title>
    <link rel="stylesheet" href="../../styles.css">
    <script>
        window.currentStep = 7;
    </script>
</head>
<body>
    <div class="container">
        <h1>Step 7: Analysis & Visualization</h1>
        <p class="subtitle">Analyze psychological data and create research-quality visualizations</p>
        
        <div id="progress-container"></div>
        
        <div class="info-section">
            <h3>🎯 Goal: Complete Research Analysis Workflow</h3>
            <p>This step teaches you to analyze psychology experiment data like a researcher. You'll learn to organize data, conduct focused analyses, and create clear visualizations that tell your research story.</p>
             <p><strong>What You'll Learn:</strong></p>
            <ul>
                <li><strong>Data Organization</strong>: Collect and standardize all experimental results</li>
                <li><strong>Progressive Analysis</strong>: Start simple, build to complex statistical tests</li>
                <li><strong>Context-Aware Prompts</strong>: Use AI with full context from your previous steps</li>
                <li><strong>Research Communication</strong>: Present findings clearly and professionally</li>
            </ul>
        </div>

        <div class="step-section">
            <h3>📁 Step 1: Organize Your Data</h3>
            <p>Before analysis, collect all your experimental results into a single, organized directory. This ensures standardized data and makes analysis much easier.</p>
            
            <div class="step-box">
                <h4>🗂️ Data Collection Checklist</h4>
                <p><strong>Create a single folder called "experiment-data" and collect:</strong></p>
                <ul>
                    <li>✅ <strong>Raw Data Files:</strong> All participant data from your experiments (JSON files from Step 6)</li>
                    <li>✅ <strong>Configuration File:</strong> Your experiment settings from Step 5 (config.json)</li>
                    <li>✅ <strong>Study Documentation:</strong> Copy of your research plan from Step 0</li>
                    <li>✅ <strong>Metadata:</strong> Notes about when/how data was collected</li>
                </ul>
                
                <div class="code-block">
                    <code>experiment-data/
├── raw-data/
│   ├── participant_001_data.json
│   ├── participant_002_data.json
│   └── ...
├── config.json (from Step 5)
├── study-plan.md (from Step 0)
└── collection-notes.txt</code>
                </div>
            </div>

            <div class="step-box">
                <h4>🔍 Data Standardization</h4>
                <p>Ensure all your data files have the same structure. Use this prompt to locate and fix any inconsistencies, being sure to include the relevant files in context:</p>
                
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Standardize Data Structure</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('standardize-data')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="standardize-data">
                        <p>I have multiple experimental data files that need standardization. Please help me:</p>
                        <ul>
                            <li>Check if all files have consistent data structure</li>
                            <li>Create a validation function to identify any problematic files</li>
                            <li>Write a script to standardize the format across all files</li>
                            <li>Generate a summary of the total dataset (number of participants, trials, etc.)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="step-section">
            <h3>📊 Step 2: First Analysis - Core Research Question</h3>
            <p>Start with the most important analysis first. Use AI with full context from your previous steps to focus on your main research question.</p>
            
            <div class="step-box">
                <h4>🧠 Context-Rich Analysis Prompt</h4>
                <p>This prompt uses everything from your previous steps to guide focused analysis:</p>

                <!-- BEGIN PREREQUISITES CHECKLIST -->
                <div class="checklist-section">
                    <h3>📋 Prerequisites</h3>
                    <div class="checklist">
                        <label><input type="checkbox"> study-plan.md available (created&nbsp;in&nbsp;<strong>Step&nbsp;0</strong>)</label>
                        <label><input type="checkbox"> config.json downloaded (from&nbsp;<strong>Step&nbsp;5</strong>)</label>
                        <label><input type="checkbox"> Sample participant data files&nbsp;in&nbsp;<code>experiment-data/</code></label>
                    </div>
                    <p class="tip"><em>Ensure these files are included as context when running the prompt below.</em></p>
                </div>
                <!-- END PREREQUISITES CHECKLIST -->
                
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Primary Research Analysis</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('primary-analysis')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="primary-analysis">
                        <p>Based on my research question in <code>study-plan.md</code>, please analyze my experimental data and highlight the ONE most important finding. Provide:</p>
                        <ol>
                            <li><strong>Simple Statistical Test:</strong> The most appropriate test for my main hypothesis</li>
                            <li><strong>Clear Visualization:</strong> One chart that shows the key finding</li>
                            <li><strong>Effect Size:</strong> How big/meaningful is this effect?</li>
                            <li><strong>Simple Interpretation:</strong> What this means for the research question</li>
                        </ol>
                        <p>Keep this analysis focused and simple — we'll add complexity later.</p>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <h4>📝 Create Your First Results Page</h4>
                <p>After running the analysis, create a simple HTML page to display your results:</p>
                
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Create Results Page</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('results-page')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="results-page">
                        <p>Create a clean, professional HTML page called "results.html" that presents my analysis findings. Include:</p>
                        <ul>
                            <li><strong>Title & Research Question:</strong> Clear statement of what was tested</li>
                            <li><strong>Key Finding:</strong> The main result in simple language</li>
                            <li><strong>Visualization:</strong> Interactive chart showing the result</li>
                            <li><strong>Statistical Details:</strong> Test statistic, p-value, effect size</li>
                            <li><strong>Interpretation:</strong> What this means for the research question</li>
                        </ul>
                        
                        <p>Use clean CSS styling and make it look professional but not overwhelming.</p>
                        
                        <p>Include the analysis output from the previous prompt as context in Cursor.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="step-section">
            <h3>📈 Step 3: Build on Your Analysis</h3>
            <p>Now that you have your core finding, add depth with additional analyses that support and expand your story.</p>
            
            <div class="step-box">
                <h4>🔍 Secondary Analysis Prompt</h4>
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Expand Analysis</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('secondary-analysis')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="secondary-analysis">
                        <p>Based on my primary analysis results, help me explore additional questions that support my main finding:</p>
                        
                        <p><strong>Include as context:</strong> The results from my primary analysis prompt and my original data files.</p>
                        
                        <p><strong>Additional analyses to consider:</strong></p>
                        <ul>
                            <li><strong>Individual Differences:</strong> Are there different patterns across participants?</li>
                            <li><strong>Time Course:</strong> How do results change over the course of the experiment?</li>
                            <li><strong>Condition Comparisons:</strong> How do different experimental conditions compare?</li>
                            <li><strong>Robustness:</strong> Do results hold with different analysis approaches?</li>
                        </ul>
                        
                        <p>Choose 1-2 additional analyses that would be most informative for my research question. Create visualizations and statistical tests for each.</p>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <h4>🎨 Visualization Enhancement</h4>
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Professional Visualizations</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('visualizations')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="visualizations">
                        <p>Create publication-quality visualizations for my research findings. I need:</p>
                        <ul>
                            <li><strong>Main Finding Chart:</strong> Professional version of my core result</li>
                            <li><strong>Individual Data:</strong> Show individual participant data alongside group means</li>
                            <li><strong>Effect Size Visualization:</strong> Clear display of practical significance</li>
                            <li><strong>Proper Statistics:</strong> Error bars, confidence intervals, sample sizes</li>
                        </ul>
                        
                        <p>Use Chart.js or similar library, with clean styling and appropriate colors. Include proper labels, legends, and statistical annotations.</p>
                        
                        <p>Include my data files and previous analysis results as context in Cursor.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="step-section">
            <h3>🧠 Step 4: Advanced Analysis (Optional)</h3>
            <p>For more sophisticated research, add computational modeling or advanced statistical techniques.</p>
            
            <div class="step-box">
                <h4>🔬 ELPH Model Analysis</h4>
                <p>While a version of the ELPH model was used as an adaptive opponent in Step 6, its primary scientific purpose is for post-hoc analysis of participant data, which is what we focus on here.</p>
                
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Computational Modeling</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('elph-modeling')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="elph-modeling">
                        <p>Implement ELPH computational modeling for post-hoc analysis of my participant data:</p>
                        
                        <p><strong>Context:</strong> Based on Mohammadi Sepahvand et al. (2014) - ELPH models statistical learning in sequential decisions</p>
                        
                        <p><strong>Include as context:</strong></p>
                        <ul>
                            <li>study-plan.md (research design from Step 0)</li>
                            <li>Sample participant data files with choice sequences</li>
                        </ul>
                        
                        <p><strong>Analysis Goals:</strong></p>
                        <ul>
                            <li>Fit ELPH model to individual participant choice sequences</li>
                            <li>Estimate learning parameters (memory length, entropy threshold)</li>
                            <li>Compare model fit across participants/conditions</li>
                            <li>Identify different learning strategies used by participants</li>
                        </ul>
                        
                        <p>Provide implementation code and analysis of which participants show evidence of statistical learning vs. random responding.</p>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <h4>📊 Advanced Statistical Tests</h4>
                <div class="formatted-prompt">
                    <div class="prompt-header">
                        <span class="prompt-title">AI Prompt: Advanced Statistics</span>
                        <button class="prompt-copy-btn" onclick="copyPrompt('advanced-stats')" title="Copy prompt text">Copy</button>
                    </div>
                    <div class="prompt-content" id="advanced-stats">
                        <p>Apply advanced statistical techniques appropriate for my research design:</p>
                        
                        <p><strong>Include as context:</strong></p>
                        <ul>
                            <li>study-plan.md (study design from Step 0)</li>
                            <li>Results from my primary analysis</li>
                            <li>My experimental data files</li>
                        </ul>
                        
                        <p><strong>Advanced techniques to consider:</strong></p>
                        <ul>
                            <li><strong>Mixed-Effects Models:</strong> Account for individual differences and repeated measures</li>
                            <li><strong>Bayesian Analysis:</strong> Use prior knowledge and uncertainty quantification</li>
                            <li><strong>Machine Learning:</strong> Classification or prediction of participant strategies</li>
                            <li><strong>Time Series Analysis:</strong> Changes in behavior over time</li>
                        </ul>
                        
                        <p>Choose the most appropriate advanced technique for my data and research question. Provide implementation and interpretation.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- <div class="step-section">
            <h3>🎮 NOT IMPLEMENTED: RPS Example: Complete Analysis Demo</h3>
            <p>See how all these steps work together using our Rock-Paper-Scissors data:</p>
            
            <div class="analysis-interface">
                <div class="file-upload-section">
                    <h4>Load RPS Experiment Data</h4>
                    <p>Upload JSON files from Step 6 to see the complete analysis workflow:</p>
                    
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">📁</div>
                        <p>Click to select data files or drag and drop here</p>
                        <input type="file" id="data-file-input" multiple accept=".json" style="display: none;">
                    </div>
                    
                    <div id="uploaded-files" class="uploaded-files"></div>
                    
                    <div class="analysis-controls">
                        <button id="load-data-btn" class="primary-btn" disabled>Load and Analyze Data</button>
                        <button id="demo-data-btn" class="secondary-btn">Use Demo Data</button>
                    </div>
                </div>

                <div class="analysis-results" id="analysis-results" style="display: none;">
                    <h4>Progressive Analysis Results</h4>
                    
                    <div class="analysis-step">
                        <h5>Step 1: Data Organization</h5>
                        <div id="data-summary"></div>
                    </div>
                    
                    <div class="analysis-step">
                        <h5>Step 2: Primary Finding</h5>
                        <div id="primary-result"></div>
                        <canvas id="primary-chart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="analysis-step">
                        <h5>Step 3: Secondary Analysis</h5>
                        <div id="secondary-results"></div>
                        <canvas id="secondary-chart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="analysis-step">
                        <h5>Step 4: Advanced Modeling</h5>
                        <div id="modeling-results"></div>
                        <canvas id="modeling-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div> -->

        <div class="step-section">
            <h3>✅ Step 7 Checklist</h3>
            <div class="checklist">
                <label><input type="checkbox" id="check-data-org"> <strong>Organized Data</strong> - Collected all experimental results into standardized directory</label>
                <label><input type="checkbox" id="check-primary-analysis"> <strong>Primary Analysis</strong> - Focused analysis of main research question</label>
                <label><input type="checkbox" id="check-results-page"> <strong>Results Page</strong> - Created professional HTML page showing findings</label>
                <label><input type="checkbox" id="check-secondary-analysis"> <strong>Secondary Analysis</strong> - Added supporting analyses and visualizations</label>
                <label><input type="checkbox" id="check-advanced-optional"> <strong>Advanced Techniques (Optional)</strong> - Applied computational modeling or advanced statistics</label>
                <label><input type="checkbox" id="check-interpretation"> <strong>Research Story</strong> - Connected findings to original research question</label>
            </div>
        </div>

        <div class="step-section">
            <h3>🎯 Next Steps: Share Your Research</h3>
            <p>Congratulations! You've completed a full research cycle. Consider:</p>
            <ul>
                <li><strong>Documentation:</strong> Write up your methods and findings</li>
                <li><strong>Replication:</strong> Test your findings with new participants</li>
                <li><strong>Extension:</strong> Design follow-up studies</li>
                <li><strong>Sharing:</strong> Present your work to others</li>
            </ul>
        </div>
    </div>

    <script src="../../shared/progress-component.js"></script>
    <script src="../../shared/code-copy-utils.js"></script>
    <script src="step7-analysis.js"></script>
    <script src="step7-visualizations.js"></script>
</body>
</html>
